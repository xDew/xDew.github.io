
<html id="html">

<head>
    <meta name="viewport" content="width=device-width, height=device-height initial-scale=1">
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="style.css">
    <div id="menuiPad" class="iPadDetect" style="display:none;"></div>
    <style>
        html {}
    </style>
</head>

<body id="body">

    <script type="text/javascript">

    function loadFontFromWeb(font, ext){

    }
    /* Globals */
    var injectedWeather = {}, //weather items
        injectedSystem = {}, //system items
        mainTarget = localStorage.themeName, //theme name
        appToOpen = null,
        wallpaperSet = false,
        percent = ['0', '40', '60', '100'],
        cycript = {};

        //define defauts plus we know visibly
        injectedSystem.battery = "90";
        injectedSystem.wifiName = "test";
        injectedSystem.wifiRSSI = '-32';
        injectedSystem.wifiBars = 3;
        injectedSystem.signalName = "ATT";
        injectedSystem.signalStrength = 2;
        injectedSystem.signalBars = 2;
        injectedSystem.systemVersion = "10.2";

        injectedWeather.temperature = "60";
        injectedWeather.deviceName = "iPhone";

        injectedSystem.phoneBadge = 0;
        injectedSystem.mailBadge = 0;
        injectedSystem.smsBadge = 0;
        injectedSystem.whatsBadge = 0;
        injectedSystem.telegramBadge = 0;



        cycript.batteryPercent = function(){
          return injectedSystem.battery;
        };
        cycript.alarmText = function(){
          return injectedSystem.alarmString;
        };
        cycript.getCharging = function(){
          return injectedSystem.chargetext;
        };
        cycript.getisCharging = function(){
          return injectedSystem.chargetext;
        };
        cycript.getWeather = function(){
          return injectedWeather;
        };
        cycript.deviceName = function(){
          return injectedSystem.deviceName;
        };
        cycript.getWifi = function(){
          return percent[Number(injectedSystem.wifiBars)];
        };
        cycript.getSignal = function(){
          return injectedSystem.signalBars;
        };
        cycript.firmwareType = function(){
          return injectedSystem.systemVersion;
        };

        //app badges
        cycript.phoneBadge = function(){
          return injectedSystem.phoneBadge;
        }
        cycript.mailBadge = function(){
          return injectedSystem.mailBadge;
        }
        cycript.smsBadge = function(){
          return injectedSystem.smsBadge;
        }
        cycript.whatsBadge = function(){
          return injectedSystem.whatsBadge || 0;
        }
        cycript.telegramBadge = function(){
          return injectedSystem.telegramBadge || 0;
        }

        //not used but there.
        cycript.wifiName = function(){
          return injectedSystem.wifiName;
        };
        cycript.wifiRSSI = function(){
          return injectedSystem.wifiRSSI;
        };
        cycript.wifiBars = function(){
          return injectedSystem.wifiBars;
        };
        cycript.signalName = function(){
          return injectedSystem.signalName;
        };
        cycript.signalRSSI = function(){
          return injectedSystem.signalStrength;
        };
        cycript.signalBars = function(){
          return injectedSystem.signalBars;
        };

    /* Calling WebView */

    function webviewDownloadTheme(target) {
        mainTarget = target;
        localStorage.themeName = mainTarget;
        window.location = 'js-call:jsDownloadTheme';
    }

    function webviewUnlock() {
        window.location = 'js-call:unlockPhone';
    }
    function webviewOpenApp(){
      window.location = 'js-call:openApp';
    }
    function webviewHasWeather(){
      //window.location = 'js-call:containsWeather';
      //alert('Yes');
    }

    function webviewloadThemeView(){
      window.location = 'js-call:loadThemeView';
    }

    function disableDimTimer(){
      window.location = 'js-call:disableDimTimer';
    }

    function webviewReloadWeather(){
      window.location = "js-call:reloadWeather";
    }
    function webviewUpdateWeather(){
      window.location = "js-call:updateWeather";
    }

    function openMenu(){
      window.location = "js-call:showMiniMenu";
    }

    function themeName(name){
      localStorage.themeName = name;
    }

    function loadCreator(){
      disableDimTimer();
        setTimeout(function(){
          location.href = "http://lockplus.us/creator";
        },0);
    }

    /* Webview calling */

//getting weather
    function lockplusWeather(weather) {
      //alert(weather);
      injectedWeather = JSON.parse(weather);
      weatherLoaded();
      return true;
    }
//getting system
    function lockplusSystem(system) {
      injectedSystem = JSON.parse(system);
        options.twentyfour = (injectedSystem.twentyfour == "yes") ? true : false;
        options.celsius = (injectedSystem.celsius == "celsius") ? true : false;
    }
//returning by call the theme name
    function returnTarget() {
        return mainTarget;
    }

    function returnApp(){
      return appToOpen;
    }
//load theme send plist as well
    function loadingTheme(dict, name) {
        var values = JSON.parse(atob(dict));
        action.loadTheme(values);
        return true;
    }

    function showLoader(){
      document.getElementById('loader').style.display = 'block';
    }
    function hideLoader(){
      document.getElementById('loader').style.display = 'none';
    }

    function wallpaperSet(){
      alert("test");
      wallpaperSet = true;
    }

    function alertTest(something){
      var word = (something) ? something : "test";
      if(word === "yes"){
        wallpaperSet = true;
      }else{
        alert(word);
      }
    }

// on theme error
    function reloadHTML(){
      //alert("Please check the theme name, it could not be downloaded.");
      location.href = location.href;
    }

    var swipeAdded = false;
    function lsMovement(value){
      // if (value == 0 && swipeAdded === false) {
      //     detectswipe('.container', jsSwipes.containerSwipe);
      //     swipeAdded = true;
      // }else{
      //   options.stopmove = false;
      // }
    }

    options.stopmove = false;

    var birdsAdded = false;
    function showAnimatedBirds(value){
      if(value == 1 && !birdsAdded){
        var iframe = document.createElement('iframe');
        iframe.frameBorder = 0;
        iframe.width = "320px";
        iframe.height = "568px";
        iframe.id = "birds";
        iframe.setAttribute("src", "animation/index.html");
        document.body.appendChild(iframe);
        birdsAdded = true;
      }
    }

    function boxBlurSetting(value){
      if(value == 0 || value == null || value == "(null)"){
        options.disableboxblur = false;
      }else{
        options.disableboxblur = true;
      }
    }

    function resetLockPlus(value){
      if(value == 0 || value == null || value == "(null)"){

      }else{
        localStorage.clear();
      }
    }

    function batteryPercent(){
      return injectedSystem.battery;
    }

  </script>
    <div id="animations"></div>
    <div id="mainContainer" class="container">
        <div id="screenElements"></div>
    </div>


    <style type="text/css">
        @media only screen and (width:768px) {
            #body {
                margin-left: 55px;
            }
            #menuiPad {
                display: block;
            }
            #loaderGif {
                margin-left: 55px;
            }
            #menuiPad {
                position: absolute;
                right: 330px;
                width: 100px;
                height: 100%;
                background-color: transparent;
            }
            .newSVG {
                position: absolute;
            }
            .menuScreen {
                right: -55px;
            }
            .container {
                overflow: visible;
            }
        }
    </style>
    <script>

var iPad = false;
var iPhoneX = false;

if (window.innerWidth === 375) {
    document.querySelector("meta[name=viewport]").setAttribute('content', 'width=device-width, initial-scale=1.18, maximum-scale=1.18, user-scalable=0');
} else if (window.innerWidth === 414 || window.innerWidth === 425) { //upscale fix
    document.querySelector("meta[name=viewport]").setAttribute('content', 'width=device-width, initial-scale=1.3, maximum-scale=1.3, user-scalable=0');
} else if (window.innerWidth === 768) {
    iPad = true;
    document.querySelector("meta[name=viewport]").setAttribute('content', 'width=device-width, initial-scale=1.8, maximum-scale=1.8 user-scalable=0');
    document.getElementById('menuiPad').style.display = 'block';
}


//alert(window.innerHeight) //689
//alert(window.innerWidth) //319
if(window.innerHeight == 689){
  document.getElementById('mainContainer').style.height = "689px";
  iPhoneX = true;
  //document.getElementById('mainContainer').style.backgroundColor = "blue";
}

  function doiPad(type){
    if(type === 'land'){
      document.getElementById('body').style.marginLeft = '120px';
      document.getElementById('body').style.marginTop = '-70px';
    }else{
      document.getElementById('body').style.marginLeft = '55px';
      document.getElementById('body').style.marginTop = '0px';
    }
  }
  function doOnOrientationChange(){
    window.addEventListener('orientationchange', doOnOrientationChange);
    switch(window.orientation){
      case -90:
      case 90:
        doiPad('land');
        break;
      default:
        doiPad('por');
        break;
    }
  }

if(iPad){
  doOnOrientationChange();
}
//location.href = "http://lockplus.us/creator";

document.getElementById('mainContainer').addEventListener('touchstart',function(){
  //closeMiniMenu();
  //openMenu();
  //alert('test');
});

</script>
    <script type="text/javascript" src="js/setup.js"></script>
    <script type="text/javascript" src="js/clock.js"></script>
    <script type="text/javascript" src="js/system.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="js/loaded.js"></script>
    <script type="text/javascript" src="js/swipe.js"></script>
</body>

</html>
